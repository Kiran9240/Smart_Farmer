<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Crop Calendar</title>
<style>
body { font-family: Arial; background: #e8f5e9; }
.container { max-width: 800px; margin: 40px auto; background: #d1c9b2; padding: 20px; border-radius: 10px; }
select { width: 100%; padding: 10px; margin-bottom: 20px; }
table { width: 100%; border-collapse: collapse; display: none; }
th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
th { background: #2e7d32; color: white; }
header { background:#2e7d32; color:#fff; padding:12px; }
.navbar { color: #f7f6f6;background:#2e7d32;padding: 10px;display:flex; justify-content:space-between; align-items:center; }
.nav-left { display:flex; align-items:center; gap:20px; color:#f7f6f6 }
.nav-links { list-style:none; display:flex; gap:20px; margin:0; padding:0; }
.nav-links a { color:#fff; text-decoration:none; font-weight:bold; }

</style>
</head>
<body>
  <nav class="navbar">
    <div>ðŸŒ¾ Smart Farmer Guide</div>
    <ul class="nav-links">
      <li><a href="/index">Home</a></li>
      <li><a href="/articles">Farmer Tips</a></li>
      <li><a href="/market">Market Prices</a></li>
      <li><a href="/login">Login</a></li>
      <li><a href="/register">Register</a></li>
    </ul>
</nav>
<div class="container">
  <h2>ðŸŒ¾ Crop Calendar</h2>

  <!-- Dropdown -->
  <select id="crop" onchange="loadCropData()">
    <option value="">-- Select Crop --</option>
    <option value="Rice">Rice</option>
    <option value="Wheat">Wheat</option>
    <option value="Maize">Maize</option>
    <option value="Soybean">Soybean</option>
    <option value="Cotton">Cotton</option>
    <option value="Sugarcane">Sugarcane</option>
    <option value="Chickpea">Chickpea</option>
    <option value="Groundnut">Groundnut</option>
    <option value="Onion">Onion</option>
    <option value="Tomato">Tomato</option>
  </select>

  <!-- Table -->
  <table id="calendarTable">
    <thead>
      <tr>
        <th>Sowing Month</th>
        <th>Growing Period</th>
        <th>Harvest Month</th>
      </tr>
    </thead>
    <tbody id="calendarBody"></tbody>
  </table>
</div>

<script>
function loadCropData() {
  const crop = document.getElementById("crop").value;
  const table = document.getElementById("calendarTable");
  const tbody = document.getElementById("calendarBody");

  if (!crop) { table.style.display = "none"; return; }

  fetch(`/get_crop_data?crop=${crop}`)   // GET request
    .then(res => res.json())
    .then(data => {
      tbody.innerHTML = "";
      if (data.length === 0) {
        tbody.innerHTML = `<tr><td colspan="3">No data available</td></tr>`;
      } else {
        data.forEach(item => {
          tbody.innerHTML += `<tr>
            <td>${item.sowing_month}</td>
            <td>${item.growing_period}</td>
            <td>${item.harvest_month}</td>
          </tr>`;
        });
      }
      table.style.display = "table";
    })
    .catch(err => console.error("Error:", err));
}
</script>
</body>
</html>